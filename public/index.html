<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title>七夕聊天</title>
    <meta name="description" content="基于 Cloudflare Workers 的实时聊天应用" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/skeleton.css" />
    <link rel="stylesheet" href="styles.css" />
    <script src="/dist/index.js" type="module"></script>
  </head>
  <body>
    <div class="app-container">
      <!-- 左侧用户信息面板 -->
      <div class="user-panel">
        <div class="user-info">
          <h4 class="app-title">七夕聊天</h4>
          
          <!-- 头像设置区域 -->
          <div class="avatar-section">
            <div class="avatar-preview" id="avatarPreview">
              <img id="avatarImage" src="" alt="头像" style="display: none;">
              <span id="avatarEmoji">👤</span>
            </div>
            <div class="input-group">
              <label for="avatarUrl">头像图片 URL</label>
              <input type="text" id="avatarUrl" placeholder="输入图片URL地址" class="u-full-width" />
            </div>
            <div class="avatar-options">
              <span class="avatar-option" data-emoji="👤">👤</span>
              <span class="avatar-option" data-emoji="😊">😊</span>
              <span class="avatar-option" data-emoji="😎">😎</span>
              <span class="avatar-option" data-emoji="🤩">🤩</span>
              <span class="avatar-option" data-emoji="🥰">🥰</span>
              <span class="avatar-option" data-emoji="😇">😇</span>
            </div>
          </div>

          <!-- 昵称设置 -->
          <div class="input-group">
            <label for="userName">昵称</label>
            <input type="text" id="userName" placeholder="请输入昵称" class="u-full-width" />
          </div>

          <!-- 用户ID显示 -->
          <div class="info-group">
            <label>用户 ID</label>
            <div class="info-value" id="userId">-</div>
          </div>

          <!-- 聊天室ID显示 -->
          <div class="info-group">
            <label>聊天室 ID</label>
            <div class="info-value-with-copy">
              <span id="roomId">-</span>
              <button class="copy-btn" id="copyRoomId" title="复制聊天室ID">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor" stroke-width="2"/>
                  <path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5" stroke="currentColor" stroke-width="2"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- 分享按钮 -->
          <div class="share-section">
            <button class="share-btn" id="shareRoom">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M18 8C19.6569 8 21 6.65685 21 5C21 3.34315 19.6569 2 18 2C16.3431 2 15 3.34315 15 5C15 6.65685 16.3431 8 18 8Z" stroke="currentColor" stroke-width="2"/>
                <path d="M18 22C19.6569 22 21 20.6569 21 19C21 17.3431 19.6569 16 18 16C16.3431 16 15 17.3431 15 19C15 20.6569 16.3431 22 18 22Z" stroke="currentColor" stroke-width="2"/>
                <path d="M6 15C7.65685 15 9 13.6569 9 12C9 10.3431 7.65685 9 6 9C4.34315 9 3 10.3431 3 12C3 13.6569 4.34315 15 6 15Z" stroke="currentColor" stroke-width="2"/>
                <path d="M15 5L9 12M9 12L15 19" stroke="currentColor" stroke-width="2"/>
              </svg>
              分享聊天室
            </button>
          </div>
        </div>
      </div>

      <!-- 右侧聊天区域 -->
      <div class="chat-panel">
        <div class="chat-container">
          <!-- 消息显示区域 -->
          <div class="messages-container" id="messagesContainer">
            <!-- 消息将通过React动态插入 -->
          </div>
          
          <!-- 固定的消息输入区域 -->
          <div class="message-input-fixed">
            <form class="message-input-container" id="messageForm">
              <textarea 
                id="messageInput" 
                placeholder="输入消息... (按Enter发送，Shift+Enter换行)" 
                class="message-input"
                rows="1"
              ></textarea>
              <button type="submit" class="send-button">
                发送
              </button>
            </form>
          </div>
        </div>
      </div>

      <!-- 移动端底部导航 -->
      <div class="mobile-nav">
        <button class="nav-btn active" data-panel="chat">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z"/>
          </svg>
          聊天
        </button>
        <button class="nav-btn" data-panel="user">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z"/>
          </svg>
          我的
        </button>
      </div>
    </div>
  </body>
</html>
